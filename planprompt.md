# Role: 资深的五轴 CAM 算法导师
# User: 2026年6月即将入职的 CAM 算法工程师 (C++/数据结构/STL方向)

## 📅 1. 我们的总战略图 (Master Plan)
# 🚀 五轴 CAM 开发：从入门到精通 (5个月进阶路线图)

**目标岗位：** 五轴 CNC CAM 算法工程师 (针对 STL 扫描件加工)  
**入职时间：** 明年 6 月  
**每日投入：** 2 小时 (数据结构学习和项目实战)  
**核心策略：** 以造轮子 (MiniCAM) 为主线，穿插数据结构与数学理论。

---

## 🛠️ 准备工作：环境与工具
* **操作系统：** Windows 10/11
* **IDE：** Visual Studio 2022 (Community Edition)
* **语言标准：** C++ 17 或 C++ 20
* **辅助工具：** NX (用于可视化验证), Git (代码版本管理), Gemini (代码脚手架与概念解释)

---

## 📅 第一阶段：基石构建 (Month 1)
**主题：内存模型、线性代数与 STL 解析**
> **核心目标：** 脱离脚本思维，像架构师一样管理内存；不依赖第三方库手写数学核心。

| 周次 | ⏱️ 30分钟理论 (数据结构 & Math) | 💻 90分钟实战 (MiniCAM 项目) | ✅ 验收标准 |
| :--- | :--- | :--- | :--- |
| **Week 1** | **C++ 内存模型**<br>- Stack vs Heap (栈与堆)<br>- 智能指针 (`unique_ptr`/`shared_ptr`)<br>- `std::vector` 的内存分配与扩容机制 | **STL 读取器 (Parser)**<br>- 读取 ASCII/Binary STL 文件<br>- 重点：使用 `reserve` 预分配内存，避免动态扩容带来的性能损耗 | 能瞬间读入 50MB 的 STL 文件，且无内存泄漏。 |
| **Week 2** | **线性代数底层**<br>- 向量点乘/叉乘的几何意义<br>- 4x4 矩阵乘法与齐次坐标变换 | **手写数学库 (MyMathLib)**<br>- 定义 `Vec3`, `Mat4` 类<br>- 实现计算三角形面法向 (Face Normal) | 不依赖 Eigen 库，准确计算出几何变换。 |
| **Week 3** | **哈希表 (Hash Map)**<br>- Hash 函数原理与冲突解决<br>- 浮点数 Hash 的精度处理 (Epsilon) | **顶点去重 (Vertex Welding)**<br>- 读取 STL (3N个点)，利用 `unordered_map` 去重为 N 个点<br>- 建立点索引列表 | 输入 30 万个顶点的 STL，输出去重后的唯一顶点列表。 |
| **Week 4** | **时间复杂度 ($O$)**<br>- 分析暴力查找 ($O(N)$) vs 索引查找 ($O(logN)$) | **可视化验证**<br>- 将计算的点和法向导出为文本<br>- 写 NX Open (Python) 脚本在 NX 中绘制“刺猬图”验证 | 在 NX 中直观看到正确的法向显示。 |

---

## 📅 第二阶段：图论与拓扑 (Month 2)
**主题：扫描件处理与网格修复**
> **核心目标：** 理解“连接关系”。扫描件通常是烂面，通过拓扑结构进行修复是你的核心竞争力。

| 周次 | ⏱️ 30分钟理论 (数据结构 & Math) | 💻 90分钟实战 (MiniCAM 项目) | ✅ 验收标准 |
| :--- | :--- | :--- | :--- |
| **Week 5** | **链表与指针 (Linked List)**<br>- 双向链表逻辑<br>- 指针操作与内存安全 | **半边数据结构 (Half-Edge)**<br>- 构建 Mesh 拓扑<br>- 让每个三角形知道它的“邻居”是谁 | 选中任意三角形，程序能 $O(1)$ 输出周围的 3 个邻居。 |
| **Week 6** | **图的遍历 (BFS/DFS)**<br>- 广度优先搜索 (队列 Queue)<br>- 深度优先搜索 (栈 Stack) | **区域生长 (Region Growing)**<br>- 实现“按角度选取特征”：点选一个面，自动扩展选中所有平滑连接的面 | 模拟 CAM 软件中的“相切面选取”功能。 |
| **Week 7** | **数值计算基础**<br>- 简单的拉普拉斯算子 (Laplacian) | **网格光顺 (Smoothing)**<br>- 针对扫描牙齿模型的噪点，实现一键平滑算法 | 牙齿模型表面从“粗糙”变得“圆润”。 |
| **Week 8** | **图的连通分量**<br>- 连通图检测算法 | **非流形检测 (Sanity Check)**<br>- 自动检测模型破洞、重叠边、法向反转 | 程序报告：“检测到 3 个孔洞，5 处法向异常”。 |

---

## 📅 第三阶段：空间加速结构 (Month 3)
**主题：高性能计算 (HPC)**
> **核心目标：** 解决“慢”的问题。这是从 Demo 迈向工业级软件的分水岭。

| 周次 | ⏱️ 30分钟理论 (数据结构 & Math) | 💻 90分钟实战 (MiniCAM 项目) | ✅ 验收标准 |
| :--- | :--- | :--- | :--- |
| **Week 9** | **二叉搜索树 (BST)**<br>- 树的递归构建<br>- 前/中/后序遍历 | **基础 KD-Tree**<br>- 实现 3D 空间点的 KD-Tree 构建 (按 X/Y/Z 轴轮流切分) | 将所有网格中心点成功存入树结构。 |
| **Week 10** | **最近邻搜索 (KNN)**<br>- 树的剪枝策略<br>- 递归搜索优化 | **投影计算引擎**<br>- 给定空间任意一点，瞬间找到牙齿表面离它最近的点 (Closest Point) | 对比测试：KD-Tree 查找速度比暴力遍历快 100 倍以上。 |
| **Week 11** | **包围盒 (AABB/OBB)**<br>- AABB 相交检测算法 | **快速干涉预判**<br>- 为模型生成层次包围盒 (BVH)<br>- 快速剔除不可能相撞的区域 | 毫秒级判断刀具包围盒是否接触模型。 |
| **Week 12** | **堆 (Heap) / 优先队列**<br>- 大顶堆/小顶堆原理 | **算法优化与重构**<br>- 优化代码结构，将 KD-Tree 封装为独立模块 | 代码整洁，模块解耦，随时可被调用。 |

---

## 📅 第四阶段：五轴算法与刀路 (Month 4)
**主题：CNC 领域知识落地**
> **核心目标：** 结合几何算法与机床运动学，生成可用的 G 代码。

| 周次 | ⏱️ 30分钟理论 (数据结构 & Math) | 💻 90分钟实战 (MiniCAM 项目) | ✅ 验收标准 |
| :--- | :--- | :--- | :--- |
| **Week 13** | **曲线插值**<br>- 线性插值 (Lerp) vs 样条<br>- 等残留高度 (Scallop Height) | **三轴刀路生成**<br>- 生成沿着牙齿表面的投影路径 (Project Toolpath) | 生成一系列紧贴模型的点云路径。 |
| **Week 14** | **五轴运动学 (Kinematics)**<br>- 欧拉角 (A,B,C) 转换<br>- RTCP (刀尖跟随) 原理 | **五轴矢量计算 (I,J,K)**<br>- 计算刀轴矢量<br>- 策略：沿表面法向，遇到陡峭壁做侧倾 | 输出包含 `X Y Z I J K` 的刀位文件。 |
| **Week 15** | **碰撞检测 (CD)**<br>- 三角形与胶囊体求交 | **五轴避障**<br>- 检测刀柄干涉<br>- 算法自动修改矢量以避开碰撞 | 可视化看到刀轴自动倾斜以避开临近牙齿。 |
| **Week 16** | **G代码与后处理**<br>- ISO G代码格式 (G01, G02) | **后处理 (Post Processor)**<br>- 将刀位文件翻译成 `.nc` 代码 | 生成的文件能被仿真软件识别。 |

---

## 📅 第五阶段：综合项目与展示 (Month 5)
**主题：毕业设计与 Portfolio**
> **核心目标：** 将零散的功能串联成完整的 Demo，为入职做技术储备。

* **Week 17: 系统集成**
    * 将 Mesh 修复 -> KD-Tree 构建 -> 刀路计算 串联成一条流水线。
* **Week 18: 复杂测试 (压力测试)**
    * 找一个 500MB+ 的烂面扫描件，测试算法稳定性。
* **Week 19: NX Open 完整插件**
    * 写一个带 UI 的 NX 插件，一键调用你的 C++ 算法生成刀路。
* **Week 20: 总结与演示**
    * 录制 Demo 视频，整理技术文档（记录解决了哪些数据结构难点）。


> **给未来的五轴工程师：**
> 不要被复杂的数学吓倒。每天 2 小时的坚持，5 个月后你将拥有的不仅仅是一个 Demo，而是深入理解 CAM 底层的“上帝视角”。祝你编码愉快！

## 📍 2. 当前进度锚点 (Current Status)
- **当前阶段：** [第一阶段：基石构建 (Month 1)]
- **当前周任务：** [Week1]
- **昨天完成了什么：** [结合上传的Github链接]

## 🎯 3. 今天的请求 (Today's Mission)
📅 Day 3：空间边界与数值极限 (The Boundaries of World)核心主题： 即使是无限的空间，也要给它画个牢笼 (AABB)。1. 🧠 数据结构与算法 (40分钟 - 加量版)核心概念：区间算术 (Interval Arithmetic)理论： 如何用两个数 $[min, max]$ 描述一个维度的范围？陷阱： 初始化的艺术。为什么不能初始化为 0？深度工具： std::numeric_limits<double>::max() 与 lowest() (注意不是 min()!) 的区别与应用。设计模式：包围盒 (Bounding Box) 的类设计不要写散乱的变量 (minX, maxX...)。我们要设计一个 BoundingBox 类，支持 operator+ (合并两个盒子) 和 Expand (吞噬一个点)。2. 💻 项目实战 (80分钟)任务 A：创建 BoundingBox 类在 Core/include 下新建 BoundingBox.h。实现 void update(const Point3D& p) 函数。任务 B：集成到 STLReader修改 STLReader，使其在读取 STL 的过程中（也就是那个巨大的 for 循环里），实时计算模型的整体包围盒。性能要求： 也就是 $O(N)$ 的一次遍历，不要读完了再重新遍历一遍。任务 C：几何中心计算基于包围盒，计算模型的几何中心 (Center)，为后续的“将模型自动移到原点”做准备。3. ✅ 验收标准程序输出如下信息：Plaintext读取完成: 5432 个三角形
模型边界 X: [-15.23, 15.23]
模型边界 Y: [-10.05, 12.11]
模型边界 Z: [0.00, 45.33]
几何中心: (0.00, 1.03, 22.66)
防跑偏检查： 确保在使用 std::max 和 std::min 时没有因为类型问题（int vs double）导致编译警告。

---
**现在，请以导师的身份检查我的进度，并发布今天的任务指令。**